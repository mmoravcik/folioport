{% extends 'base.html' %}
{% load staticfiles %}

{% block layout %}
<div class="container-fluid">
    <ul class="nav" id="side-menu">
        <li>
            <a href="{% url 'folioport:dashboard:home' %}">
                Home
            </a>
        </li>
        <li>
            <a href="{% url 'folioport:dashboard:blog:post-list' %}">
                Blog
            </a>
        </li>
        <li>
            <a href="{% url 'folioport:dashboard:project:list' %}">
               Projects
            </a>
        </li>
        <li>
            <a href="{% url 'folioport:dashboard:page:list' %}">
                Pages
            </a>
        </li>
        <li>
            <a href="{% url 'folioport:dashboard:my_css:redirect-to-edit' %}">
                CSS
            </a>
        </li>
    </ul>

    {% for message in messages %}
         <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}

    {% block content %}
    {% endblock %}
 </div>
{% endblock %}


{% block meta %}
<meta name="viewport" content="width=device-width, initial-scale=1.0">
{% endblock %}

{% block css %}
<link href="{% static 'folioport/css/folioport.css'%}" rel="stylesheet" type="text/css" />
<link href="{% static 'folioport/js/lib/bootstrap/css/bootstrap.css'%}" rel="stylesheet" type="text/css" />
<link href="{% static 'folioport/js/lib/bootstrap/css/bootstrap-responsive.css'%}" rel="stylesheet" type="text/css" />
<link href="{% static 'folioport/css/datepicker.css'%}" rel="stylesheet" type="text/css" />
<link href="{% static 'folioport/css/codemirror.css'%}" rel="stylesheet" type="text/css" />
{% endblock %}

{% block extrascripts %}
<script src="{% static 'folioport/js/lib/datepicker.js'%}" type="text/javascript"></script>
<script src="{% static 'folioport/js/lib/html.sortable.js'%}" type="text/javascript"></script>
<script src="{% static 'folioport/js/lib/codemirror.js'%}" type="text/javascript"></script>
<script src="{% static 'folioport/js/lib/css.js'%}" type="text/javascript"></script>
<script type="text/javascript">
    $('.sortable').sortable().bind('sortupdate', function(e, ui) {
        var item_order = [];
        ui.startparent.children('li').each(function () {
            item_order.push(($(this).attr('data-id')));
        });

        var data = JSON.parse('{"item_order": "'+ item_order +'"}');

        $.post( "{% url 'folioport:dashboard:cms:items-order-save' %}", data, function( data ) {
            if (data.status == 'success') {
                $.growl('', 'Order of your items has been saved');
            } else {
                alert('Sorry! Unable to save your order :(');
            }
        });
    });
</script>
{{ block.super }}
{% endblock %}

{% block title %} Folioport admin {% endblock %}
